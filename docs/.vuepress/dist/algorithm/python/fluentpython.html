<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Fluent Python | weigao</title>
    <meta name="description" content="...">
    <link rel="icon" href="/android-chrome-512x512.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.e8d92be3.css" as="style"><link rel="preload" href="/assets/js/app.5b882d21.js" as="script"><link rel="preload" href="/assets/js/5.cd1db3e5.js" as="script"><link rel="preload" href="/assets/js/44.1f8b8410.js" as="script"><link rel="preload" href="/assets/js/23.2c687b63.js" as="script"><link rel="prefetch" href="/assets/js/1.61fa752c.js"><link rel="prefetch" href="/assets/js/10.d0a7f483.js"><link rel="prefetch" href="/assets/js/100.c3c38b3f.js"><link rel="prefetch" href="/assets/js/101.ba47a8ea.js"><link rel="prefetch" href="/assets/js/11.40e90e2e.js"><link rel="prefetch" href="/assets/js/12.59472db4.js"><link rel="prefetch" href="/assets/js/13.82dc035e.js"><link rel="prefetch" href="/assets/js/14.3f854a99.js"><link rel="prefetch" href="/assets/js/15.27ecaa65.js"><link rel="prefetch" href="/assets/js/16.7269e8f3.js"><link rel="prefetch" href="/assets/js/17.1baed97f.js"><link rel="prefetch" href="/assets/js/18.337eab3d.js"><link rel="prefetch" href="/assets/js/19.7441a7d8.js"><link rel="prefetch" href="/assets/js/2.abd16662.js"><link rel="prefetch" href="/assets/js/20.3a5f087d.js"><link rel="prefetch" href="/assets/js/21.48fc9301.js"><link rel="prefetch" href="/assets/js/22.82d214b6.js"><link rel="prefetch" href="/assets/js/24.fa6e8fb7.js"><link rel="prefetch" href="/assets/js/25.738cedaa.js"><link rel="prefetch" href="/assets/js/26.c5def0f6.js"><link rel="prefetch" href="/assets/js/27.dc9cdb49.js"><link rel="prefetch" href="/assets/js/28.101b6314.js"><link rel="prefetch" href="/assets/js/29.abf7f7b1.js"><link rel="prefetch" href="/assets/js/30.0629d4d9.js"><link rel="prefetch" href="/assets/js/31.92736f25.js"><link rel="prefetch" href="/assets/js/32.503a383b.js"><link rel="prefetch" href="/assets/js/33.d700f59d.js"><link rel="prefetch" href="/assets/js/34.5304a9af.js"><link rel="prefetch" href="/assets/js/35.ab6a77a1.js"><link rel="prefetch" href="/assets/js/36.603e9dd9.js"><link rel="prefetch" href="/assets/js/37.e89bdebe.js"><link rel="prefetch" href="/assets/js/38.1f73a8c6.js"><link rel="prefetch" href="/assets/js/39.322980cc.js"><link rel="prefetch" href="/assets/js/4.20b55e5f.js"><link rel="prefetch" href="/assets/js/40.4ca46d73.js"><link rel="prefetch" href="/assets/js/41.ff17cbd8.js"><link rel="prefetch" href="/assets/js/42.b93980ad.js"><link rel="prefetch" href="/assets/js/43.625374e9.js"><link rel="prefetch" href="/assets/js/45.6b685468.js"><link rel="prefetch" href="/assets/js/46.b1e427dc.js"><link rel="prefetch" href="/assets/js/47.1105348d.js"><link rel="prefetch" href="/assets/js/48.f20ef025.js"><link rel="prefetch" href="/assets/js/49.5b0ccec3.js"><link rel="prefetch" href="/assets/js/50.0d742578.js"><link rel="prefetch" href="/assets/js/51.759bde75.js"><link rel="prefetch" href="/assets/js/52.e961fe01.js"><link rel="prefetch" href="/assets/js/53.cfc3464d.js"><link rel="prefetch" href="/assets/js/54.3add5986.js"><link rel="prefetch" href="/assets/js/55.113f6510.js"><link rel="prefetch" href="/assets/js/56.647d3fbf.js"><link rel="prefetch" href="/assets/js/57.81a8354f.js"><link rel="prefetch" href="/assets/js/58.ac99e744.js"><link rel="prefetch" href="/assets/js/59.e3bb8a78.js"><link rel="prefetch" href="/assets/js/6.46455cb0.js"><link rel="prefetch" href="/assets/js/60.76f1be0c.js"><link rel="prefetch" href="/assets/js/61.547bf157.js"><link rel="prefetch" href="/assets/js/62.bb2d5f35.js"><link rel="prefetch" href="/assets/js/63.1d014a02.js"><link rel="prefetch" href="/assets/js/64.26d8c9ff.js"><link rel="prefetch" href="/assets/js/65.79722d0a.js"><link rel="prefetch" href="/assets/js/66.60e32eb8.js"><link rel="prefetch" href="/assets/js/67.e94e5af8.js"><link rel="prefetch" href="/assets/js/68.0c62bc2d.js"><link rel="prefetch" href="/assets/js/69.35a9527f.js"><link rel="prefetch" href="/assets/js/7.64614a42.js"><link rel="prefetch" href="/assets/js/70.48adc3c5.js"><link rel="prefetch" href="/assets/js/71.bc9001ba.js"><link rel="prefetch" href="/assets/js/72.677442bb.js"><link rel="prefetch" href="/assets/js/73.5e19868d.js"><link rel="prefetch" href="/assets/js/74.9b41ca8d.js"><link rel="prefetch" href="/assets/js/75.66697b03.js"><link rel="prefetch" href="/assets/js/76.b8a63a09.js"><link rel="prefetch" href="/assets/js/77.5bd5aa5a.js"><link rel="prefetch" href="/assets/js/78.26da0d5f.js"><link rel="prefetch" href="/assets/js/79.5012579e.js"><link rel="prefetch" href="/assets/js/8.11937928.js"><link rel="prefetch" href="/assets/js/80.9042b852.js"><link rel="prefetch" href="/assets/js/81.f18600b7.js"><link rel="prefetch" href="/assets/js/82.81cf8d7b.js"><link rel="prefetch" href="/assets/js/83.368be746.js"><link rel="prefetch" href="/assets/js/84.0ad20007.js"><link rel="prefetch" href="/assets/js/85.bed6c2b0.js"><link rel="prefetch" href="/assets/js/86.a567014d.js"><link rel="prefetch" href="/assets/js/87.9001eb19.js"><link rel="prefetch" href="/assets/js/88.9133eeba.js"><link rel="prefetch" href="/assets/js/89.6d4e53cb.js"><link rel="prefetch" href="/assets/js/9.d01dceaa.js"><link rel="prefetch" href="/assets/js/90.865b8b70.js"><link rel="prefetch" href="/assets/js/91.18aafcc1.js"><link rel="prefetch" href="/assets/js/92.cf3382cb.js"><link rel="prefetch" href="/assets/js/93.b6003c1b.js"><link rel="prefetch" href="/assets/js/94.84d5e718.js"><link rel="prefetch" href="/assets/js/95.eb85deaa.js"><link rel="prefetch" href="/assets/js/96.568ffb46.js"><link rel="prefetch" href="/assets/js/97.8b1d193f.js"><link rel="prefetch" href="/assets/js/98.c7ac97e9.js"><link rel="prefetch" href="/assets/js/99.5dc9efbf.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e8d92be3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">weigao</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link router-link-active">Algorithm</a></div><div class="nav-item"><a href="/commits/" class="nav-link">Commits</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link router-link-active">Algorithm</a></div><div class="nav-item"><a href="/commits/" class="nav-link">Commits</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Fluent Python</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/algorithm/python/fluentpython.html#data-struct" class="sidebar-link">Data Struct</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/algorithm/python/fluentpython.html#_1-slicing" class="sidebar-link">1. Slicing</a></li><li class="sidebar-sub-header"><a href="/algorithm/python/fluentpython.html#_2-list" class="sidebar-link">2. List</a></li><li class="sidebar-sub-header"><a href="/algorithm/python/fluentpython.html#_3-bisect" class="sidebar-link">3. Bisect</a></li><li class="sidebar-sub-header"><a href="/algorithm/python/fluentpython.html#_4-set" class="sidebar-link">4. Set</a></li></ul></li><li><a href="/algorithm/python/fluentpython.html#high-level-function" class="sidebar-link">High-level Function</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/algorithm/python/fluentpython.html#_1-count" class="sidebar-link">1. count()</a></li><li class="sidebar-sub-header"><a href="/algorithm/python/fluentpython.html#_2-map" class="sidebar-link">2. map()</a></li><li class="sidebar-sub-header"><a href="/algorithm/python/fluentpython.html#int2list-and-list2int" class="sidebar-link">int2list and list2int</a></li><li class="sidebar-sub-header"><a href="/algorithm/python/fluentpython.html#_3-bit-operation" class="sidebar-link">3. Bit operation</a></li><li class="sidebar-sub-header"><a href="/algorithm/python/fluentpython.html#_4-all" class="sidebar-link">4. all()</a></li><li class="sidebar-sub-header"><a href="/algorithm/python/fluentpython.html#_5-filter" class="sidebar-link">5. filter()</a></li><li class="sidebar-sub-header"><a href="/algorithm/python/fluentpython.html#_6-reduce" class="sidebar-link">6. reduce()</a></li><li class="sidebar-sub-header"><a href="/algorithm/python/fluentpython.html#_7-name" class="sidebar-link">7. _name_</a></li></ul></li><li><a href="/algorithm/python/fluentpython.html#decorators" class="sidebar-link">Decorators</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/algorithm/python/fluentpython.html#property" class="sidebar-link">@property</a></li></ul></li><li><a href="/algorithm/python/fluentpython.html#python3-i-o" class="sidebar-link">Python3 I/O</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/algorithm/python/fluentpython.html#format-output" class="sidebar-link">Format Output</a></li></ul></li><li><a href="/algorithm/python/fluentpython.html#input" class="sidebar-link">Input</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/algorithm/python/fluentpython.html#effective-python" class="sidebar-link">Effective Python</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/algorithm/python/fluentpython.html#_1-function-closure" class="sidebar-link">1. Function Closure</a></li><li class="sidebar-sub-header"><a href="/algorithm/python/fluentpython.html#_2-generator" class="sidebar-link">2. Generator</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="fluent-python"><a href="#fluent-python" aria-hidden="true" class="header-anchor">#</a> Fluent Python</h1> <p>Python’s simplicity lets you become productive quickly, but this often means you aren’t using everything it has to offer.  With this hands-on guide, you’ll learn how to write effective, idiomatic Python code by leveraging its best—and possibly most neglected—features. Author Luciano Ramalho takes you through Python’s core language features and libraries, and shows you how to make your code shorter, faster, and more readable at the same time.</p> <h2 id="data-struct"><a href="#data-struct" aria-hidden="true" class="header-anchor">#</a> Data Struct</h2> <h3 id="_1-slicing"><a href="#_1-slicing" aria-hidden="true" class="header-anchor">#</a> 1. Slicing</h3> <ul><li>basic slicing</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token string">'bicycle'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
<span class="token string">'ycle'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token string">'bic'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token string">'bye'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token string">'elcycib'</span>
</code></pre></div><p>If you want to <em>reverse a string</em>, the last example is a choice.</p> <ul><li>assigning to slices</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> l <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> l
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> l<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> l<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> l
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span>
</code></pre></div><p>what you can see is that <strong>[2,3,4]</strong> is replaced by <strong>[20,30]</strong></p> <h3 id="_2-list"><a href="#_2-list" aria-hidden="true" class="header-anchor">#</a> 2. List</h3> <ul><li><p>list of list</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> board <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'_'</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">3</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> board
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'_'</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'_'</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'_'</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> board<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'x'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> board
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'_'</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'_'</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">,</span> <span class="token string">'x'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'_'</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre></div><p>The first line is the right way to multiply it,rather than:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> wrong_board <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'_'</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">3</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> wrong_board<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> wrong_board
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'_'</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'_'</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'_'</span><span class="token punctuation">,</span> <span class="token string">'_'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre></div><p>​</p></li> <li><p>list.sort &amp; sorted</p> <p>The list.sort method sorts a list in-place, that is, without making a copy.</p> <p>In contrast, the built-in function sorted creates a new list and returns it.</p></li> <li><p>make list a stack or queue</p> <p>The .append and .pop methods make a list usable as a stack or a queue (if you use .append and .pop(0), you get LIFO, Last in First out, behavior). But inserting and removing from the left of a list (the 0-index end) is costly because the entire list must be shifted.</p></li> <li><p>deques and queues</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> collections <span class="token keyword">import</span> deque
dq <span class="token operator">=</span> deque<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> maxlen<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token comment">#dq: deque([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], maxlen=10)</span>
dq<span class="token punctuation">.</span>rotate<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token comment">#[7, 8, 9, 0, 1, 2, 3, 4, 5, 6]</span>
<span class="token comment">#this function rotates items from the right end</span>
<span class="token comment">#and when dp.rotate(-3) is from the left</span>
dq<span class="token punctuation">.</span>appendleft<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment">#[-1, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span>
dq<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">#[3, 4, 5, 6, 7, 8, 9, 11, 22, 33]</span>
<span class="token comment">#default is insert from right</span>
</code></pre></div><p>what is different between <em>append</em> and <em>extend</em>? here is an example:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dp
deque<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">,</span> maxlen<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dp<span class="token punctuation">.</span>appendleft<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dp
deque<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">,</span> maxlen<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dp<span class="token punctuation">.</span>extendleft<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> dp
deque<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> maxlen<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><p>note that <strong>extendleft(iter)</strong> works by appending each successive item of the iter argument to the left of the deque, therefore the final position of the items is reversed.</p></li></ul> <h3 id="_3-bisect"><a href="#_3-bisect" aria-hidden="true" class="header-anchor">#</a> 3. Bisect</h3> <p><code>#bisect: [baɪ'sɛkt]</code></p> <p><code>Bisection is the general activity of dividing a geometric figure into two equal parts</code></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> sys
<span class="token keyword">import</span> bisect

HAYSTACK <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span>
NEEDLES <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">]</span>

ROW_FMT <span class="token operator">=</span> <span class="token string">'{0:2d} @ {1:2d}    {2}{0:&lt;2d}'</span>

<span class="token keyword">def</span> <span class="token function">demo</span><span class="token punctuation">(</span>bisect_fn<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> needle <span class="token keyword">in</span> <span class="token builtin">reversed</span><span class="token punctuation">(</span>NEEDLES<span class="token punctuation">)</span><span class="token punctuation">:</span>
        position <span class="token operator">=</span> bisect_fn<span class="token punctuation">(</span>HAYSTACK<span class="token punctuation">,</span> needle<span class="token punctuation">)</span>
        offset <span class="token operator">=</span> position <span class="token operator">*</span> <span class="token string">'  |'</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>ROW_FMT<span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>needle<span class="token punctuation">,</span> position<span class="token punctuation">,</span> offset<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>

    <span class="token keyword">if</span> sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'left'</span><span class="token punctuation">:</span>
        bisect_fn <span class="token operator">=</span> bisect<span class="token punctuation">.</span>bisect_left
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        bisect_fn <span class="token operator">=</span> bisect<span class="token punctuation">.</span>bisect

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'DEMO:'</span><span class="token punctuation">,</span> bisect_fn<span class="token punctuation">.</span>__name__<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'haystack -&gt;'</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token string">'%2d'</span> <span class="token operator">%</span> n <span class="token keyword">for</span> n <span class="token keyword">in</span> HAYSTACK<span class="token punctuation">)</span><span class="token punctuation">)</span>
    demo<span class="token punctuation">(</span>bisect_fn<span class="token punctuation">)</span>
</code></pre></div><p>the output is:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>DEMO: bisect
haystack -<span class="token operator">&gt;</span>  1  4  5  6  8 12 15 20 21 23 23 26 29 30
31 @ 14      <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>31
30 @ 14      <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>30
29 @ 13      <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>29
23 @ 11      <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>23
22 @  9      <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>22
10 @  5      <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>10
 8 @  5      <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>8
 5 @  3      <span class="token operator">|</span>  <span class="token operator">|</span>  <span class="token operator">|</span>5
 2 @  1      <span class="token operator">|</span>2
 1 @  1      <span class="token operator">|</span>1
 0 @  0    0
</code></pre></div><h3 id="_4-set"><a href="#_4-set" aria-hidden="true" class="header-anchor">#</a> 4. Set</h3> <p>python的集合是一个十分方便的对于元素可以操作的序列</p> <div class="language-python extra-class"><pre class="language-python"><code>student <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token string">'Jim'</span><span class="token punctuation">,</span> <span class="token string">'Mary'</span><span class="token punctuation">,</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token string">'Jack'</span><span class="token punctuation">,</span> <span class="token string">'Rose'</span><span class="token punctuation">}</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span>   <span class="token comment"># 输出集合，重复的元素被自动去掉</span>
 
<span class="token comment"># set可以进行集合运算</span>
a <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">'abracadabra'</span><span class="token punctuation">)</span>
b <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">'alacazam'</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>a <span class="token operator">-</span> b<span class="token punctuation">)</span>     <span class="token comment"># a和b的差集</span>
 
<span class="token keyword">print</span><span class="token punctuation">(</span>a <span class="token operator">|</span> b<span class="token punctuation">)</span>     <span class="token comment"># a和b的并集</span>
 
<span class="token keyword">print</span><span class="token punctuation">(</span>a <span class="token operator">&amp;</span> b<span class="token punctuation">)</span>     <span class="token comment"># a和b的交集</span>
 
<span class="token keyword">print</span><span class="token punctuation">(</span>a <span class="token operator">^</span> b<span class="token punctuation">)</span>     <span class="token comment"># a和b中不同时存在的元素</span>
</code></pre></div><p>set的集合运算十分有用，看下面的代码：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">findWords</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> words<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        :type words: List[str]
        :rtype: List[str]
        &quot;&quot;&quot;</span>
        a <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">'qwertyuiop'</span><span class="token punctuation">)</span>
        b <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">'asdfghjkl'</span><span class="token punctuation">)</span>
        c <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">'zxcvbnm'</span><span class="token punctuation">)</span>
        ans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> word <span class="token keyword">in</span> words<span class="token punctuation">:</span>
            w <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span>word<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>w <span class="token operator">&amp;</span> a <span class="token operator">==</span> w<span class="token punctuation">)</span> <span class="token keyword">or</span> <span class="token punctuation">(</span>w <span class="token operator">&amp;</span> b <span class="token operator">==</span> w<span class="token punctuation">)</span> <span class="token keyword">or</span> <span class="token punctuation">(</span>w <span class="token operator">&amp;</span> c <span class="token operator">==</span> w<span class="token punctuation">)</span><span class="token punctuation">:</span>
                ans<span class="token punctuation">.</span>append<span class="token punctuation">(</span>word<span class="token punctuation">)</span>
        <span class="token keyword">return</span> ans
</code></pre></div><p>上述代码实现了一个求解某序列是否在键盘的同一行的操作，通过求交集看是否结果等于自身就可以很方便地求解出结果。</p> <h2 id="high-level-function"><a href="#high-level-function" aria-hidden="true" class="header-anchor">#</a> High-level Function</h2> <h3 id="_1-count"><a href="#_1-count" aria-hidden="true" class="header-anchor">#</a> 1. count()</h3> <p>用于统计字符串里某个字符出现的次数count()方法，语法：</p> <div class="language- extra-class"><pre class="language-text"><code>str.count(sub, start= 0,end=len(string))
</code></pre></div><p><strong>参数</strong></p> <ul><li>sub -- 搜索的子字符串。</li> <li>start -- 字符串开始搜索的位置。默认为第一个字符,第一个字符索引值为0。</li> <li>end -- 字符串中结束搜索的位置。字符中第一个字符的索引为 0。默认为字符串的最后一个位置。</li></ul> <p><strong>返回值</strong></p> <ul><li>该方法返回子字符串在字符串中出现的次数</li></ul> <p><strong>思考</strong>：理解下面这行代码所实现的功能</p> <div class="language-py extra-class"><pre class="language-py"><code>
<span class="token keyword">return</span> <span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span>S<span class="token punctuation">.</span>count<span class="token punctuation">,</span> J<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">return</span> <span class="token keyword">not</span> <span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'R'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'L'</span><span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'U'</span><span class="token punctuation">:</span> <span class="token number">1j</span><span class="token punctuation">,</span> <span class="token string">'D'</span><span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1j</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">,</span> moves<span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><p>第一行代码实现了两个字符串中共同字符的计数。</p> <p>第二行代码实现了一个计算坐标的方法。</p> <h3 id="_2-map"><a href="#_2-map" aria-hidden="true" class="header-anchor">#</a> 2. map()</h3> <ol><li><p><strong>描述</strong></p> <p><strong>map()</strong> 会根据提供的函数对指定序列做映射。</p> <p>第一个参数 function 以参数序列中的每一个元素调用 function 函数，返回包含每次 function 函数返回值的新列表。</p></li> <li><p><strong>语法</strong></p> <p>map() 函数语法：</p> <div class="language-py extra-class"><pre class="language-py"><code><span class="token builtin">map</span><span class="token punctuation">(</span>function<span class="token punctuation">,</span> iterable<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p><strong>参数</strong></p> <p>function -- 函数，有两个参数</p> <p>iterable -- 一个或多个序列</p></li></ol> <p><strong>Usage</strong></p> <p>e.g.1. 将一个列表中的整数转化成字符串存储如另一个列表中：</p> <div class="language-python extra-class"><pre class="language-python"><code>newList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> number <span class="token keyword">in</span> oldList<span class="token punctuation">:</span> 
    newList<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>用<code>map()</code>等效于：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">,</span> oldList<span class="token punctuation">)</span>
</code></pre></div><h3 id="int2list-and-list2int"><a href="#int2list-and-list2int" aria-hidden="true" class="header-anchor">#</a> int2list and list2int</h3> <ul><li>int2list</li></ul> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">int2list</span><span class="token punctuation">(</span>intNum<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>intNum<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>list2int</li></ul> <div class="language-py extra-class"><pre class="language-py"><code><span class="token keyword">def</span> <span class="token function">list2int</span><span class="token punctuation">(</span>aList<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">,</span> aList<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_3-bit-operation"><a href="#_3-bit-operation" aria-hidden="true" class="header-anchor">#</a> 3. Bit operation</h3> <table><thead><tr><th>运算符</th> <th>描述</th></tr></thead> <tbody><tr><td>&amp;</td> <td>按位与</td></tr> <tr><td>|</td> <td>按位或</td></tr> <tr><td>^</td> <td>按位异或</td></tr> <tr><td>~</td> <td>按位取反</td></tr> <tr><td>&lt;&lt;</td> <td>左移</td></tr> <tr><td>&gt;&gt;</td> <td>右移</td></tr></tbody></table> <p><code>str(bin(x^y).count'1')</code>计算了两个整数之间的Hamming distance.</p> <p>Questions: to think what this code did:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#LC693</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">hasAlternatingBits</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> n<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">False</span>
        num <span class="token operator">=</span> n <span class="token operator">^</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token keyword">not</span> <span class="token punctuation">(</span>num <span class="token operator">&amp;</span> <span class="token punctuation">(</span>num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_4-all"><a href="#_4-all" aria-hidden="true" class="header-anchor">#</a> 4. all()</h3> <p><strong>USE</strong>:</p> <div class="language- extra-class"><pre class="language-text"><code>all(iterable, /)
    Return True if bool(x) is True for all values x in the iterable.
If the iterable is empty, return True.
</code></pre></div><p>This is <strong>example 1</strong>(LeetCode 728) about the usage:</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">selfDividingNumbers</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        :type left: int
        :type right: int
        :rtype: List[int]
        &quot;&quot;&quot;</span>
       <span class="token comment"># return [num for num in range(left, right+1) </span>
   	   <span class="token comment"># if all((int(d) and not num % int(d)) for d in str(num))]</span>
        is_self_dividing <span class="token operator">=</span> <span class="token keyword">lambda</span> num<span class="token punctuation">:</span> <span class="token string">'0'</span> <span class="token keyword">not</span> <span class="token keyword">in</span> <span class="token builtin">str</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> 
        <span class="token keyword">and</span> <span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>num <span class="token operator">%</span> <span class="token builtin">int</span><span class="token punctuation">(</span>digit<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">for</span> digit <span class="token keyword">in</span> <span class="token builtin">str</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        x <span class="token operator">=</span> <span class="token builtin">filter</span><span class="token punctuation">(</span>is_self_dividing<span class="token punctuation">,</span> <span class="token builtin">range</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> right <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token builtin">list</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</code></pre></div><p>该段代码使用了all的特性，并且在最后返回了一个filter的可迭代对象，然后转化成list，得到结果。</p> <p><strong>example 2</strong> (LeetCode 766):</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">isToeplitzMatrix</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> matrix<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        :type matrix: List[List[int]]
        :rtype: bool
        &quot;&quot;&quot;</span>
        <span class="token keyword">return</span> <span class="token builtin">all</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> matrix<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> 
                   <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Tips: <code>len(matrix)</code> gets the number of rows, <code>len(matrix[0])</code> gets the number of columns.</p> <h3 id="_5-filter"><a href="#_5-filter" aria-hidden="true" class="header-anchor">#</a> 5. filter()</h3> <p>假设你想从考试分数的一个列表中删除所有的0分，如下的循环可以完成这个任务：</p> <div class="language-python extra-class"><pre class="language-python"><code>newList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> number <span class="token keyword">in</span> oldList<span class="token punctuation">:</span>
    <span class="token keyword">if</span> number <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">:</span>
        newList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>number<span class="token punctuation">)</span>
</code></pre></div><p>如果使用<code>filter()</code>则只需要如下代码：</p> <div class="language-python extra-class"><pre class="language-python"><code>newList <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">filter</span><span class="token punctuation">(</span>isPositive<span class="token punctuation">,</span> oldList<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>再使用<code>lambda</code>表达式创建匿名函数：</p> <div class="language-python extra-class"><pre class="language-python"><code>newList <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> number<span class="token punctuation">:</span> number <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span> oldList<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_6-reduce"><a href="#_6-reduce" aria-hidden="true" class="header-anchor">#</a> 6. reduce()</h3> <p><code>functools.reduce</code>可以应用带有两个参数的函数来将一个可迭代的对象的项转化为单个的值，而干函数的两个参数是下一项和前一次应用该函数的结果。</p> <p>e.g. 计算10的阶乘：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> functools
product <span class="token operator">=</span> functools<span class="token punctuation">.</span><span class="token builtin">reduce</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">,</span> y<span class="token punctuation">:</span> x<span class="token operator">*</span>y<span class="token punctuation">,</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_7-name"><a href="#_7-name" aria-hidden="true" class="header-anchor">#</a> 7. <strong>name</strong></h3> <p><code>__name__</code>这个系统变量显示了当前模块执行过程中的名称，<code>__main__</code>一般作为函数的入口，或者整个工程开始运行的入口。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#test.py</span>
<span class="token keyword">def</span> <span class="token function">HaveFun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'My name is %s'</span> <span class="token operator">%</span> __name__<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Someone else called me! my name is %s'</span> <span class="token operator">%</span> __name__<span class="token punctuation">)</span>
HaveFun<span class="token punctuation">(</span><span class="token punctuation">)</span>      
</code></pre></div><p>output: <code>My name is __mian__</code></p> <div class="language- extra-class"><pre class="language-text"><code>#main.py
import test
test.HaveFun()
</code></pre></div><p>output:</p> <div class="language- extra-class"><pre class="language-text"><code>$ Someone else called me! my name is test
$ Someone else called me! my name is test
</code></pre></div><h2 id="decorators"><a href="#decorators" aria-hidden="true" class="header-anchor">#</a> Decorators</h2> <h3 id="property"><a href="#property" aria-hidden="true" class="header-anchor">#</a> @property</h3> <p>In Python, <code>property()</code> is a built-in function that creates and returns a property object. The signature of this function is</p> <div class="language- extra-class"><pre class="language-text"><code>property(fget=None, fset=None, fdel=None, doc=None)
</code></pre></div><p>where, <code>fget</code> is function to get value of the attribute, <code>fset</code> is function to set value of the attribute, <code>fdel</code> is function to delete the attribute and <code>doc</code> is a string (like a comment).</p> <p>To better understand this, <a href="https://www.programiz.com/python-programming/property" target="_blank" rel="noopener noreferrer">see this blog<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="python3-i-o"><a href="#python3-i-o" aria-hidden="true" class="header-anchor">#</a> Python3 I/O</h2> <h3 id="format-output"><a href="#format-output" aria-hidden="true" class="header-anchor">#</a> Format Output</h3> <p>When output, we can use <code>str()</code>, <code>repr()</code> and <code>print()</code> , the different between them could be found in <a href="http://www.runoob.com/python3/python3-inputoutput.html" target="_blank" rel="noopener noreferrer">Python3 Tutorial<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>The usage of <code>format</code> , one thing to note :</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'{0} and {1}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token string">'Google'</span><span class="token punctuation">,</span> <span class="token string">'Baidu'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Google <span class="token keyword">and</span> Baidu
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'{1} and {0}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token string">'Google'</span><span class="token punctuation">,</span> <span class="token string">'Baidu'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> Baidu <span class="token keyword">and</span> Google

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'{0:2d} {1:3f}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># specifies the length of the placeholder</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'{name}: age}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">'weigao'</span><span class="token punctuation">,</span> age <span class="token operator">=</span> <span class="token string">'18'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> weigao<span class="token punctuation">:</span> <span class="token number">18</span>
</code></pre></div><p>The <code>%</code> also can be use to format output, but it is an old way, so use it as little as possible.</p> <h2 id="input"><a href="#input" aria-hidden="true" class="header-anchor">#</a> Input</h2> <p>Python provides the <code>input()</code> function from the standard input to a line, and the default standard input is the keyboard.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token builtin">str</span> <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">&quot;please input: &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;your input is: &quot;</span><span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="effective-python"><a href="#effective-python" aria-hidden="true" class="header-anchor">#</a> Effective Python</h2> <h3 id="_1-function-closure"><a href="#_1-function-closure" aria-hidden="true" class="header-anchor">#</a> 1. Function Closure</h3> <p>(<a href="https://github.com/chenweigao/_code/blob/master/Effective_Python/EP15.py" target="_blank" rel="noopener noreferrer">EP 15<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)有的时候需要<em>将重要的消息或者意外的事件优先显示在其他内容前面</em>，可以使用以下代码：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">sort_priority</span><span class="token punctuation">(</span>values<span class="token punctuation">,</span> group<span class="token punctuation">)</span><span class="token punctuation">:</span>
    found <span class="token operator">=</span> <span class="token boolean">False</span>

    <span class="token keyword">def</span> <span class="token function">helper</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">nonlocal</span> found
        <span class="token keyword">if</span> x <span class="token keyword">in</span> group<span class="token punctuation">:</span>
            found <span class="token operator">=</span> <span class="token boolean">True</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>
    values<span class="token punctuation">.</span>sort<span class="token punctuation">(</span>key<span class="token operator">=</span>helper<span class="token punctuation">)</span>
    <span class="token keyword">return</span> found
</code></pre></div><p>上述代码把helper这个闭包函数，传给sort方法的key参数。</p> <p><strong>思考</strong>：第7行和第8行的return的含义？</p> <h3 id="_2-generator"><a href="#_2-generator" aria-hidden="true" class="header-anchor">#</a> 2. Generator</h3> <p>(<a href="https://github.com/chenweigao/_code/blob/master/Effective_Python/EP16.py" target="_blank" rel="noopener noreferrer">EP 16<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>)生成器是使用<code>yield</code>表达式的函数，为了提高编程效率，考虑用<strong>生成器来改写直接返回列表的函数</strong>。调用生成器时，会返回迭代器。</p> <p>在这个例子中的错误示例中，使用<code>append</code>把所有的结果都放在列表里面，如果输入量非常大的话，会导致程序消耗尽内存而奔溃。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">3/2/2019, 6:14:57 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.5b882d21.js" defer></script><script src="/assets/js/5.cd1db3e5.js" defer></script><script src="/assets/js/44.1f8b8410.js" defer></script><script src="/assets/js/23.2c687b63.js" defer></script>
  </body>
</html>
