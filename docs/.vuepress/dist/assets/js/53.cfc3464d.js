(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{506:function(a,s,e){"use strict";e.r(s);var t=e(8),r=Object(t.a)({},function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker","aria-hidden":"true"}},[a._v("#")]),a._v(" Docker")]),a._v(" "),e("h2",{attrs:{id:"installation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installation","aria-hidden":"true"}},[a._v("#")]),a._v(" Installation")]),a._v(" "),e("ol",[e("li",[e("p",[a._v("Follow the "),e("a",{attrs:{href:"https://docs.docker.com/install/linux/docker-ce/ubuntu/#os-requirements",target:"_blank",rel:"noopener noreferrer"}},[a._v("tutorial"),e("OutboundLink")],1)])]),a._v(" "),e("li",[e("p",[a._v("Test whether the Docker is installed correctly (Ubuntu 16.04)")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker container run hello-world\n\ndocker --version\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker info\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker image "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("-all"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])])])]),a._v(" "),e("li",[e("p",[a._v("List the versions available in your repo:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt-cache")]),a._v(" madison docker-ce\n")])])])])]),a._v(" "),e("h2",{attrs:{id:"containers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#containers","aria-hidden":"true"}},[a._v("#")]),a._v(" Containers")]),a._v(" "),e("p",[a._v("Make sure all is set up:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[a._v("docker run hello-world\n")])])]),e("p",[a._v("Run the app, before this, a "),e("code",[a._v("Dockerfile")]),a._v(" should be created:")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker run -p 4000:80 friendlyhello\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker run -d -p 4000:80 friendlyhello\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# run on background")]),a._v("\n")])])]),e("p",[a._v("将 Docker 的 80 端口映射出去至 4000 端口，如果是在后台运行的话，可查看：")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker container "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#stop")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker container stop 1fa4a"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".\n")])])]),e("h2",{attrs:{id:"share-images"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#share-images","aria-hidden":"true"}},[a._v("#")]),a._v(" Share images")]),a._v(" "),e("ol",[e("li",[e("p",[a._v("Login")])]),a._v(" "),e("li",[e("p",[a._v("Tag the image")])]),a._v(" "),e("li",[e("p",[a._v("Push the image")])]),a._v(" "),e("li",[e("p",[a._v("Pull")])])]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker login\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker tag friendlyhello weigaochen/get-started:part2\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# docker tag image username/respository:tag")]),a._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker image "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker push weigaochen/get-started:part2\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker run -p 4000:801 weigaochen/get-started:part2\n")])])]),e("h2",{attrs:{id:"services"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#services","aria-hidden":"true"}},[a._v("#")]),a._v(" Services")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("通过 "),e("code",[a._v("docker-compose.yml")]),a._v(" 来配置，在其中引用已经 Published 的 image")]),a._v(" "),e("blockquote",[e("p",[a._v("A "),e("code",[a._v("docker-compose.yml")]),a._v(" file is a YAML file that defines how Docker containers should behave in production.")])])]),a._v(" "),e("li",[e("p",[a._v("Run the new load-balanced app")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker swarm init\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" docker stack deploy -c docker-compose.yml getstartedlab\n")])])]),e("p",[a._v("注意到其中的 "),e("code",[a._v("getstartedlab")]),a._v(" 是我们给 app 起的一个名字")])]),a._v(" "),e("li",[e("p",[a._v("查看："),e("code",[a._v("sudo docker service ls")])]),a._v(" "),e("p",[a._v("注意到 "),e("code",[a._v("NAME")]),a._v(" 属性的值为 "),e("code",[a._v("getstartedlab_web")]),a._v(".")])])]),a._v(" "),e("h3",{attrs:{id:"task"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#task","aria-hidden":"true"}},[a._v("#")]),a._v(" Task")]),a._v(" "),e("blockquote",[e("p",[a._v("A single container running in a service is called a task.")])]),a._v(" "),e("p",[a._v("Let us list the "),e("strong",[a._v("task")]),a._v(":")]),a._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" getstartedlab_web\n")])])]),e("p",[a._v("如果顺利的话，这时候可以看到 5 个 task: "),e("code",[a._v("getstartedlab_web.1")]),a._v(" 至 "),e("code",[a._v("getstartedlab_web.5")]),a._v(", 原因是我们在  "),e("code",[a._v("docker-compose.yml")]),a._v(" 文件中配置了 5 个 "),e("code",[a._v("replices")]),a._v(".")]),a._v(" "),e("h2",{attrs:{id:"swarms"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#swarms","aria-hidden":"true"}},[a._v("#")]),a._v(" Swarms")]),a._v(" "),e("p",[e("strong",[a._v("KEYWORDS")]),a._v(": swarm manager, workers, swarm clusters")])])},[],!1,null,null,null);s.default=r.exports}}]);