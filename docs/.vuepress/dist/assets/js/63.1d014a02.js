(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{517:function(a,t,s){"use strict";s.r(t);var e=s(8),n=Object(e.a)({},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"snap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#snap","aria-hidden":"true"}},[a._v("#")]),a._v(" Snap")]),a._v(" "),s("p",[a._v("Easily Upgraded, Universal Linux Package")]),a._v(" "),s("p",[a._v("Snaps are containerised software packages that are simple to create and install. They auto-update and are safe to run. And because they bundle their dependencies, they work on all major Linux systems without modification.")]),a._v(" "),s("p",[a._v("Snapcraft is a command line tool used to build snaps. This guide details the recommended steps to get ready to build snaps.The easiest way to package your code as a snap is to use Snapcraft, which supports building from source and from existing packages, integrates into your CI process and handles publishing your snaps to the world.")]),a._v(" "),s("h2",{attrs:{id:"_1-abstract"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-abstract","aria-hidden":"true"}},[a._v("#")]),a._v(" 1. Abstract")]),a._v(" "),s("p",[a._v("Snapcraft builds on top of tools like autotools, make, and cmake to create snaps fro people to install on Linux.")]),a._v(" "),s("p",[s("code",[a._v("sudo apt-get install snapcraft")])]),a._v(" "),s("p",[a._v("Here are some snap advantages that will benefit many C/C++ projects:")]),a._v(" "),s("ul",[s("li",[a._v("Installation: "),s("code",[a._v("snap install myapp")])]),a._v(" "),s("li",[a._v("Directly control the delivery of automatic application updates")])]),a._v(" "),s("h2",{attrs:{id:"_2-dosbox-snap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-dosbox-snap","aria-hidden":"true"}},[a._v("#")]),a._v(" 2. DOSBox Snap")]),a._v(" "),s("p",[a._v("Snaps are defined in a single yaml file placed in the root of your project. The DOSBox example shows the entire "),s("code",[a._v("snapcraft.yaml")]),a._v(" for a existing project.")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("name: dosbox\nversion: "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"0.74-svn"')]),a._v("\nsummary: DOSBox\ndescription: "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v("\n  DOSBox is a x86 emulator with Tandy/Hercules/CGA/EGA/VGA/SVGA graphics\n  sound and DOS. It"),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s been designed to run old DOS games under platforms that\n  don'")]),a._v("t support it.\n\nconfinement: devmode\n\napps:\n  dosbox:\n    command: dosbox\n\nparts:\n  dosbox:\n    plugin: autotools\n    source-type: "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v("\n    source: http://source.dosbox.com/dosboxsvn.tgz\n    build-packages:\n      - g++\n      - "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("make")]),a._v("\n      - libsdl1.2-dev\n      - libpng12-dev\n      - libsdl-net1.2-dev\n      - libsdl-sound1.2-dev\n      - libasound2-dev\n")])])]),s("h3",{attrs:{id:"confinement"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#confinement","aria-hidden":"true"}},[a._v("#")]),a._v(" Confinement")]),a._v(" "),s("p",[a._v("To get started, we won’t "),s("a",{attrs:{href:"https://docs.snapcraft.io/reference/confinement",target:"_blank",rel:"noopener noreferrer"}},[a._v("confine"),s("OutboundLink")],1),a._v(" this application. Unconfined applications, specified with "),s("code",[a._v("devmode")]),a._v(", can only be released to the hidden “edge” channel where you and other developers can install them.")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("confinement: devmode\n")])])]),s("h3",{attrs:{id:"parts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#parts","aria-hidden":"true"}},[a._v("#")]),a._v(" Parts")]),a._v(" "),s("p",[a._v("Parts define how to build your application.")]),a._v(" "),s("p",[a._v("Before building the part, the dependencies listed as "),s("strong",[a._v("build-package")]),a._v(" are installed. More information of autotools plugin is given by command "),s("code",[a._v("snapcraft help autotools")]),a._v(".")]),a._v(" "),s("h2",{attrs:{id:"_3-basic-about-snap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-basic-about-snap","aria-hidden":"true"}},[a._v("#")]),a._v(" 3.Basic about Snap")]),a._v(" "),s("h3",{attrs:{id:"install-snap-on-ubuntu"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#install-snap-on-ubuntu","aria-hidden":"true"}},[a._v("#")]),a._v(" Install snap on Ubuntu")]),a._v(" "),s("p",[a._v("Ubuntu includes Snap by default starting with the 16.04LTS release, for the older 14.04LTS release or any flavor, you have to install it form the archive:")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" snap\n")])])]),s("h3",{attrs:{id:"using-the-snap-command"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#using-the-snap-command","aria-hidden":"true"}},[a._v("#")]),a._v(" Using the snap command")]),a._v(" "),s("p",[a._v("Login with "),s("a",{attrs:{href:"https://login.ubuntu.com/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Ubuntu One Account"),s("OutboundLink")],1)]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" snap login "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("youremail"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("p",[a._v("When you are logged in, "),s("strong",[a._v("find snaps")]),a._v(" in the snap store, and then you can install it using the snap name.")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("snap "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("find")]),a._v(" hello\nsnap "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" hello-world\nsnap list "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# view details about installed snap")]),a._v("\n")])])]),s("h2",{attrs:{id:"_4-snapcraft"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-snapcraft","aria-hidden":"true"}},[a._v("#")]),a._v(" 4.Snapcraft")]),a._v(" "),s("h3",{attrs:{id:"setup-lxd"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setup-lxd","aria-hidden":"true"}},[a._v("#")]),a._v(" Setup LXD")]),a._v(" "),s("p",[a._v("LXD installation on Ubuntu is quite straightforward:")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("snap "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" lxd init\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("usermod")]),a._v(" -g lxd "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${USER}")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#LXD requires that your user is in the lxd group.")]),a._v("\n")])])]),s("h3",{attrs:{id:"test-a-container-build"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#test-a-container-build","aria-hidden":"true"}},[a._v("#")]),a._v(" Test a container build")]),a._v(" "),s("p",[a._v("By now should be all set, we can test that everything is setup correctly with a few commands:")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" test-snapcraft\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cd")]),a._v(" test-snapcraft\nsnapcraft init\nsnapcraft cleanbuild\n")])])]),s("h3",{attrs:{id:"build-first-snap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#build-first-snap","aria-hidden":"true"}},[a._v("#")]),a._v(" Build first snap")]),a._v(" "),s("p",[a._v("Snapcraft uses single text file to describe the entire build process for a snap:")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" test-snapcraft/snapcraft.yaml\n")])])]),s("p",[a._v("To get start with a template, you can run "),s("code",[a._v("snapcraft init")]),a._v(", it wll create a new directory "),s("em",[a._v("snap")]),a._v(" with a file named "),s("em",[a._v("snapcraft.yaml")]),a._v(" , the final file looks like this:")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("name: hello\nversion: "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2.10"')]),a._v("\nsummary: GNU Hello, the "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"hello world"')]),a._v(" snap\ndescription: GNU Hello prints a friendly greeting.\ngrade: stable\nconfinement: strict\n\napps:\n  hello:\n    command: hello\n\nparts:\n  gnu-hello:\n    plugin: autotools\n    source: http://ftp.gnu.org/gnu/hello/hello-2.10.tar.gz\n")])])]),s("p",[a._v("This is the only file needed in the directory, Snapcraft can use local source code or fetch everything needed to build the snap from remote sources.")]),a._v(" "),s("h3",{attrs:{id:"run-snapcraft"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#run-snapcraft","aria-hidden":"true"}},[a._v("#")]),a._v(" Run snapcraft")]),a._v(" "),s("p",[a._v("You can now build a snap out of your "),s("code",[a._v("snapcraft.yaml")]),a._v(" by running "),s("code",[a._v("snapcraft")]),a._v(" in the project directory:")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("snapcraft\n")])])]),s("p",[a._v("After this process, the snap is now available in your directory.")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v("\nhello_2.10_amd64.snap  parts  snap  prime \n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" snap "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" hello_2.10_amd64.snap --dangerous\nhello 2.10 installed\n$ hello\nHello, World"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$sudo")]),a._v(" snap remove dosbox\n")])])])])},[],!1,null,null,null);t.default=n.exports}}]);